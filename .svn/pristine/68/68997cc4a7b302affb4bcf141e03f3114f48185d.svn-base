#  makefile for ImagePlus

all: debug release 

debug:   lib_debug   tools_debug   clients_debug   modules_debug
release: lib_release tools_release clients_release modules_release

lib:      lib_debug       lib_release
tools:    tools_debug     tools_release
clients:  clients_debug   clients_release
modules:  modules_debug   modules_release

validate: validate_debug  validate_release


modules_debug:
	scons -Q modules debug=yes 
modules_release:
	scons -Q modules

lib_debug:
	scons -Q lib debug=yes
lib_release:
	scons -Q lib

validate_debug:
	scons -Q validate debug=yes 
validate_release:
	scons -Q validate

tools_debug: 
	scons -Q tools debug=yes
tools_release:
	scons -Q tools
	
clients_debug: 
	scons -Q tools debug=yes
clients_release:
	scons -Q tools

doc:
	scons -Q doc
api:
	scons -Q api


check_all:
	@echo
	@echo "--------------------------"
	@echo " BUILDING IN RELEASE MODE "
	@echo "--------------------------"
	@echo
	scons -s -j4 --config=force validate modules tools clients 
	
	@echo
	@echo "------------------------"
	@echo " BUILDING IN DEBUG MODE "
	@echo "------------------------"
	@echo
	scons -s -j4 debug=yes             validate modules tools clients 
	scons -s -j4 debug=yes static=true validate modules tools clients 
	
	@echo
	@echo "--------------------------------------------------------"
	@echo " BUILDING IN DEBUG MODE WITH ALL DEPENDENCES AND STATIC "
	@echo "--------------------------------------------------------"
	@echo
	scons -s -j4 debug=yes validate modules tools clients \
                        static=true          \
                        USE_IMAGEMAGICK=true \
                        USE_FFMPEG=true      \
                        USE_FFTW3=true       \
                        USE_VIDEO4LINUX=true \
                        USE_XML=true         \
                        USE_OPENMESH=true    \
                        USE_OPENNI=true      \
                        USE_OPENGL=true      \
                        USE_SMARTFLOW=true         

	scons -s -j4 debug=yes validate modules tools clients \
                        USE_IMAGEMAGICK=true \
                        USE_FFMPEG=true      \
                        USE_FFTW3=true       \
                        USE_VIDEO4LINUX=true \
                        USE_XML=true         \
                        USE_OPENMESH=true    \
                        USE_OPENNI=true      \
                        USE_OPENGL=true      \
                        USE_SMARTFLOW=true
	
	@echo
	@echo "----------------------------------------------------------"
	@echo " BUILDING IN RELEASE MODE WITH ALL DEPENDENCES AND STATIC "
	@echo "----------------------------------------------------------"
	@echo
	scons -s -j4 validate modules tools clients \
              USE_IMAGEMAGICK=true \
              USE_FFMPEG=true      \
              USE_FFTW3=true       \
              USE_VIDEO4LINUX=true \
              USE_XML=true         \
              USE_OPENMESH=true    \
              USE_OPENNI=true      \
              USE_OPENGL=true      \
              USE_SMARTFLOW=true

	scons -s -j4 validate modules tools clients   \
              static=true          \
              USE_IMAGEMAGICK=true \
              USE_FFMPEG=true      \
              USE_FFTW3=true       \
              USE_VIDEO4LINUX=true \
              USE_XML=true         \
              USE_OPENMESH=true    \
              USE_OPENNI=true      \
              USE_OPENGL=true      \
              USE_SMARTFLOW=true

clean:
	scons -c           validate modules tools clients
	scons -c debug=yes validate modules tools clients

