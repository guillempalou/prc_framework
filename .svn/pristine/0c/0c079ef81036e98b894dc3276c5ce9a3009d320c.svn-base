// --------------------------------------------------------------
// Copyright (C)
// Universitat Politecnica de Catalunya (UPC) - Barcelona - Spain
// --------------------------------------------------------------

//!
//!  \file bayer.hpp
//!
//!  Bayer convertion to RGB, Gray, etc.. (Prosilica Cams)
//!


#ifndef IMAGEPLUS_IO_BAYER_HPP
#define IMAGEPLUS_IO_BAYER_HPP

#include <imageplus/core/imagergb.hpp>
#include <imageplus/core/multiarray.hpp>

namespace imageplus
{
	namespace io
	{
		//!
        //! \brief Function which converts a Bayer image, with (x,y) dimensions, stored in a 
		//!        MultiArray buffer, into an RGB image with (x/2,y/2) dimensions.
		//!
    	//! Bayer image is stored in the MultiArray with the following structure:
    	//! 
		//! line0: RGRGRGRG...\n
		//! line1: GBGBGBGB...\n
		//! line2: RGRGRGRG...\n
		//!	
		//! To create the RGB image we fill the three channels with the pixels of the Multiarray buffer, 
		//! one by one in case of Red and Blue channel, and we calculate the arithmetic average
		//! for the Green channel.
		//!
		//! \param[in] bayer : MultiArray buffer is needed by the camera to store a Bayer image.
        //! \param[in] rgb	 : RGB image structure where we will store the converted image.
	    //!
	    //! \author Marc Vila
	    //! \author Albert Gil Moreno <albert.gil@upc.edu>
	    //!
		void convert_bayer (const MultiArray<uint8,2>& bayer, ImageRGB<uint8>& rgb);
	}
}


#endif /*IMAGEPLUS_IO_BAYER_HPP*/
