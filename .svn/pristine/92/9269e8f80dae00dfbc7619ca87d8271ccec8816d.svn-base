// --------------------------------------------------------------
// Copyright (C)
// Universitat Politecnica de Catalunya (UPC) - Barcelona - Spain
// --------------------------------------------------------------

//!
//!  \file geometric_shape.test
//!
//!  Tests for the GeometricShape classs 
//!

#include <imageplus/core/geometric_shape.hpp>
#include <imageplus/core/image.hpp>
#include <imageplus/core/volume.hpp>

BOOST_AUTO_TEST_SUITE ( suite_geometric_shape );

using namespace imageplus;

typedef boost::mpl::list<uint8,int64,float64> GeometricShapesTestTypes;
typedef Coord<int64,2> C2D;
    
BOOST_AUTO_TEST_CASE ( test_geometric_shape )
{
    // Default Constructor 
    GeometricShape<int64,2> vshape;
    BOOST_CHECK(vshape.size()   == 0);
    BOOST_CHECK(vshape.origin() == C2D(0,0));
    
    vshape.push_back(Coord<int64,2>(1,2));
    vshape.push_back(Coord<int64,2>(2,3));
    vshape.push_back(Coord<int64,2>(4,5));
    vshape.push_back(Coord<int64,2>(6,7));
    
    BOOST_CHECK(vshape.size()   == 4);
   
    BOOST_CHECK(vshape.origin() == C2D(0,0));
    
    // Copy constructor
    GeometricShape<int64,2> cp(vshape);
    BOOST_CHECK(cp.size()   == 4);
    BOOST_CHECK(cp.origin() == C2D(0,0));
    BOOST_CHECK(cp[0] == C2D(1,2));
    BOOST_CHECK(cp[1] == C2D(2,3));
    BOOST_CHECK(cp[2] == C2D(4,5));
    BOOST_CHECK(cp[3] == C2D(6,7));
}

BOOST_AUTO_TEST_CASE ( test_geometric_shape_origin )
{
    GeometricShape<int64,2> gs;
    gs.push_back(Coord<int64,2>(1,2));
    gs.push_back(Coord<int64,2>(2,3));
    gs.push_back(Coord<int64,2>(4,5));
    gs.push_back(Coord<int64,2>(6,7));

    Coord<int64,2> org(2,3);
    
    gs.origin(org);
    BOOST_CHECK(gs.size()   == 4);
    BOOST_CHECK(gs.origin() == org);
    
    BOOST_CHECK(gs[0] == C2D(3,5));
    BOOST_CHECK(gs[1] == C2D(4,6));
    BOOST_CHECK(gs[2] == C2D(6,8));
    BOOST_CHECK(gs[3] == C2D(8,10));
}


BOOST_AUTO_TEST_SUITE_END ();
