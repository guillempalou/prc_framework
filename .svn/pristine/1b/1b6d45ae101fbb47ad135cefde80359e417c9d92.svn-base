// --------------------------------------------------------------
// Copyright (C)
// Universitat Politecnica de Catalunya (UPC) - Barcelona - Spain
// --------------------------------------------------------------

//!
//!  \file writedescriptors.cpp
//!
//!  Implementation of classes for writing descriptors to disk
//!

#ifdef USE_XML

#include <io_auxiliar.hpp>
#include <typeinfo>

#include <imageplus/io/writedescriptors.hpp>

#include <boost/filesystem.hpp>


imageplus::io::WriteDescriptors::WriteDescriptors() 
    : _filename( "" ), _identifiers()
{
}


imageplus::io::WriteDescriptors::WriteDescriptors(const std::string& filename, const std::vector<std::string>& identifiers, const std::vector<std::string>& uri_names, const std::vector<std::string>& uri_values) : _identifiers(identifiers)
{   
    open(filename, identifiers, uri_names, uri_values);
}

imageplus::io::WriteDescriptors::~WriteDescriptors()
{
}

void imageplus::io::WriteDescriptors::open( const std::string& filename, const std::vector<std::string>& identifiers, const std::vector<std::string>& uri_names, const std::vector<std::string>& uri_values)
{
    _filename = filename;
    _uri_names = uri_names;
    _uri_values = uri_values;
    
    std::string extension = boost::filesystem::extension( _filename );
    if(extension != ".xml")
    {
        throw ImagePlusError( "WriteDescriptors: File extension must be '.xml'" );
    }
}

#endif
