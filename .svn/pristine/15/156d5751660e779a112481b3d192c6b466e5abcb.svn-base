// --------------------------------------------------------------
// Copyright (C)
// Universitat Politecnica de Catalunya (UPC) - Barcelona - Spain
// --------------------------------------------------------------

//!
//!  \file annotatedsemanticclass.cpp
//!
//!  AnnotatedSemanticClass
//!

#include <list>
#include <sstream>
#include <string>

#include <boost/foreach.hpp>

#include <imageplus/semantic/annotatedsemanticclass.hpp>
#include <imageplus/semantic/instance.hpp>

using namespace imageplus::semantic;

void AnnotatedSemanticClass::add_instance(Instance instance, Instance::InstanceType type)
{
	_instances[type].push_back(instance);
}

const AnnotatedSemanticClass::AnnotationInstancesType& AnnotatedSemanticClass::get_instances(Instance::InstanceType type) const
{
	return _instances[type];
}

std::ostream& imageplus::semantic::operator<<(std::ostream &os, const AnnotatedSemanticClass& asc)
{
	os << "Semantic class id: " << asc._semantic_class << std::endl;
	for (size_t instance_type=0; instance_type<Instance::NUM_INSTANCE_TYPES; instance_type++)
	{
		const char *instance_type_name = Instance::instance_type_names[instance_type];
		os << " `- " << instance_type_name << " instances (" << asc._instances[instance_type].size() << ")" << std::endl;
		BOOST_FOREACH(Instance instance, asc._instances[instance_type])
			os << "    `- " << instance << std::endl;
	}
	return os;
}
