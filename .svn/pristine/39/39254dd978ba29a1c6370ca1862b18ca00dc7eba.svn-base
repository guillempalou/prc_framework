// --------------------------------------------------------------
// Copyright (C)
// Universitat Politecnica de Catalunya (UPC) - Barcelona - Spain
// --------------------------------------------------------------

/*!
 * \file draw_in_image.test
 * 
 * Validation tests of draw_in_image
 */

#include <imageplus/toolbox/draw_in_image.hpp>
#include <imageplus/io/writeimage.hpp>
#include <iostream>

BOOST_AUTO_TEST_SUITE ( DrawInImageSuite );

using namespace imageplus;
using namespace imageplus::toolbox;

BOOST_AUTO_TEST_CASE( test_draw_in_image )
{	

    ImageRGB<uint8> ima(200,200);

    BBox2D          bb1(Coord<int64,2>(50,50),100,100);
    BBox2D          bb2(Coord<int64,2>(150,150),20,20);

    // Draw rectangle
    imageplus::toolbox::draw_rectangle (ima, bb1, (uint8)255, (uint8)255, (uint8)255, 1, false);

    // Draw filled, semitransparent rectangle
    imageplus::toolbox::draw_rectangle (ima, bb2, (uint8)255, (uint8)0,   (uint8)0,   1, true, 0.5);

    Coord<int64,2> center1(199,199);
    Coord<int64,2> center2(50,50);
    float64 radius = 20;

    // Draw circumference
    imageplus::toolbox::draw_circle (ima, radius, center1, (uint8)255, (uint8)255, (uint8)255);

    // Draw filled, semitransparent circle
    imageplus::toolbox::draw_circle (ima, radius, center2, (uint8)255, (uint8)0, (uint8)0, true, 0.3);

    std::string filename_png  = std::string(TEST_DATA_PATH_W) + "/draw_gs_test.png";
    io::WriteImage wimg1( filename_png  );
    wimg1 << ima;    
    
    BOOST_WARN_MESSAGE(false, "test_draw_in_image: TESTS NOT IMPLEMENTED" );
}

BOOST_AUTO_TEST_CASE( test_render_text )
{	
    ImageRGB<uint8> ima(200,200);
    ima(0) = 128;
    ima(1) = 128;
    ima(2) = 128;
    
    //std::string font = "-misc-fixed-medium-o-semicondensed-19-*-*-*-c-60-iso8859-1";
    //std::string font = "-*-bitstream charter-medium-r-normal-*-*-*-*-*-*-*-iso8859-1";

#ifdef  USE_IMAGEMAGICK
    imageplus::toolbox::render_text (ima, "render_text", Coord2D<>(20,30), 255  , 0,   0, "Helvetica", 18, true);
    imageplus::toolbox::render_text (ima, "render_text", Coord2D<>(20,60), 255, 255,   0, "Helvetica", 13, false);
#endif

    //"Times New Roman"
    //"Century Schoolbook"

    std::string filename_png  = std::string(TEST_DATA_PATH_W) + "/draw_text_test.png";
    io::WriteImage wimg1( filename_png  );
    wimg1 << ima;    

    BOOST_WARN_MESSAGE(false, "test_render_text: TESTS NOT IMPLEMENTED" );
}

BOOST_AUTO_TEST_SUITE_END ();
